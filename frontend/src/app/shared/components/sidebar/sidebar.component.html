<div class="flex flex-col h-full min-h-0 overflow-visible">
  <!-- Header con logo y título -->
  <div class="flex items-center justify-between h-16 px-4 border-b border-base-300/10">
    <div class="flex items-center gap-3 w-full">
      <app-cecytec-logo
        [showText]="!isCollapsed"
        size="large"
        [variant]="themeService.isDarkMode() ? 'dark' : 'light'">
      </app-cecytec-logo>
    </div>
    @if (!isCollapsed) {
      <button class="btn btn-ghost btn-circle btn-sm lg:hidden" (click)="onCloseSidebar()">
        <ng-icon name="lucideX" class="w-4 h-4"></ng-icon>
      </button>
    }
  </div>

  <!-- Menú de navegación -->
  <nav class="flex-1 min-h-0 p-2 space-y-1 overflow-visible">
    <app-sidebar-menu
      [menuItems]="menuService.filteredMenuItems()"
      [isCollapsed]="isCollapsed"
      [level]="0"
      [expandedItems]="menuService.expandedItems()"
      [activeItem]="menuService.activeItemId()"
      (itemClick)="onMenuItemClick($event)"
      (toggleExpanded)="onMenuToggleExpanded($event)"
      (navigate)="onMenuNavigate($event)">
    </app-sidebar-menu>
  </nav>

  <!-- Footer con buscador y logout -->
  <div>
    <!-- Búsqueda -->
    <div class="p-2 border-t border-base-300/10">
      @if (!isCollapsed) {
        <div class="relative">
          <ng-icon
            name="lucideSearch"
            class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-base-content/50">
          </ng-icon>
          <input
            #searchInput
            type="text"
            placeholder="Buscar menú..."
            class="input input-sm w-full pl-9 pr-8 bg-base-200 text-base-content placeholder:text-base-content/50"
            (input)="onSearchInput($event)"
            (keyup.escape)="clearSearch()">
          @if (searchQuery) {
            <button
              class="absolute right-2 top-1/2 -translate-y-1/2 btn btn-ghost btn-xs btn-circle"
              (click)="clearSearch()">
              <ng-icon name="lucideX" class="w-3 h-3"></ng-icon>
            </button>
          }
        </div>
      } @else {
        <button
          class="w-full btn btn-ghost"
          (click)="focusSearch()">
          <ng-icon name="lucideSearch" class="w-4 h-4"></ng-icon>
        </button>
      }
    </div>

    <!-- Logout -->
    <div class="border-t border-base-300/10">
      <button
        (click)="onLogout()"
        class="w-full flex items-center gap-3 p-4 hover:bg-base-200 transition-colors text-left">
        <ng-icon name="lucideLogOut" class="w-5 h-5 text-base-content/70 shrink-0"></ng-icon>
        @if (!isCollapsed) {
          <div class="flex flex-col">
            <span class="font-medium text-base-content">Cerrar sesión</span>
            <span class="text-xs text-base-content/70">Salir del sistema</span>
          </div>
        }
      </button>
    </div>
  </div>
</div>
